struct Void
struct Cell[P]
  value: P

function[P] update (c: Cell[P]) (v: P) : Void =
  c.value = v

function[P] swap1 (c1: Cell[P]) (c2: Cell[P]) : Void =
  c1.value = c2.value = c1.value

function[P] swap2 (c1: Cell[P]) (c2: Cell[P]) : Void =
  c1.value
  = c2.value
  = c1.value

function[P] swap3 (c1: Cell[P]) (c2: Cell[P]) : Void =
  c1.value =
  c2.value =
  c1.value

function[P] assoc (c1: Cell[P]) (c2: Cell[P]) : Void =
  c1.value = (c2.value = c1.value)
  c1.value = ((c2.value = c1.value))
  (c1.value = c2.value) = c1.value
  c1.value = c2.value = c1.value
  c1.value =
    c2.value =
      c1.value

function right2 (c1: Int) (c2: Int) : Int = right2 c1 c2

function test (c: Cell[Int]) (i1: Int) (i2: Int) : Void =
  c1.value = right2 i1 i2

function crazy1 (c: Cell[Int]) (i1: Int) (i2: Int): Int =
  # This is assign c with i1, and then return i2 to be assigned to c.
  c = (c = i1 i2)
  # Can use semi-colon to explicitly show that it isn't using the previous terms.
  c = (c = i1 ; i2)
  # Can be multiline too
  c = 
     c = i1
     i2

function[P] failed (c1: Cell[P]) (c2: Cell[P]) : Void =
  c1.value
    = c2.value
      = c1.value
